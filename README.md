# Video Processing

è§†é¢‘å¤„ç†å·¥å…·åº“ï¼Œæä¾›è§†é¢‘åŠ å·¥ç›¸å…³çš„å·¥å…·æ–¹æ³•ã€‚

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªè§†é¢‘å¤„ç†å·¥å…·åº“ï¼Œå‰æœŸä¸“æ³¨äºè§†é¢‘åŠ å·¥ç›¸å…³çš„å·¥å…·æ–¹æ³•å¼€å‘ï¼Œæœªæ¥å°†é›†æˆç³»ç»Ÿæ€§çš„ä»»åŠ¡ç›®æ ‡ã€‚

## åŠŸèƒ½ä»‹ç»
### æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

- **åŠ¨æ€æµåŠ¨è¿›åº¦æ¡ (Immersive Dynamic Flow)**ï¼š
  - **å®æ—¶åŒæ­¥**ï¼šè¿›åº¦æ¡å¡«å……å®½åº¦éšæ’­æ”¾æ—¶é—´ $t$ å®æ—¶å˜åŒ–ï¼Œè®¡ç®—å…¬å¼ä¸º $w = iw \times (t / duration)$ï¼Œç¡®ä¿è§†è§‰åé¦ˆä¸å†…å®¹å®Œå…¨åŒæ­¥ã€‚
  - **ä¸æ»‘è§†è§‰**ï¼šé‡‡ç”¨ FFmpeg `overlay` æ»¤é•œé…åˆåŠ¨æ€ä½ç§»é€»è¾‘ï¼Œå®ç°å¹³æ»‘çš„â€œç”Ÿé•¿å¼â€å¡«å……æ•ˆæœï¼Œè€Œéç®€å•çš„é™æ€è¦†ç›–ã€‚
- **å¤šç« èŠ‚æ™ºèƒ½åˆ‡å‰² (Smart Chapter Segmenting)**ï¼š
  - **å¯è§†åŒ–æ®µè½**ï¼šæ”¯æŒé€šè¿‡æ—¶é—´æˆ³ï¼ˆå¦‚ `01:20`ï¼‰åœ¨è¿›åº¦æ¡ä¸Šè‡ªåŠ¨ç»˜åˆ¶å‚ç›´ **åˆ†å‰²çº¿ (Dividers)**ï¼Œæ¸…æ™°å±•ç¤ºè§†é¢‘ç»“æ„ã€‚
  - **åº•éƒ¨ç« èŠ‚æ ‡é¢˜**ï¼šæ¯ä¸ªæ®µè½ä¸­å¿ƒè‡ªåŠ¨æ ‡æ³¨ç« èŠ‚åç§°ï¼Œå¹¶é…åˆ **æ–‡å­—é˜´å½± (Shadow)** ç®—æ³•ï¼Œç¡®ä¿æ–‡å­—åœ¨ä»»ä½•èƒŒæ™¯è‰²ä¸‹å‡æ¸…æ™°å¯è§ã€‚
- **æ™ºèƒ½ä¿¡æ¯åˆ†ç¦»è®¾è®¡ (Dual-Layer Info Display)**ï¼š
  - **å…¨å±€å¯¼èˆª**ï¼šåº•éƒ¨è¿›åº¦æ¡è´Ÿè´£å±•ç¤ºè§†é¢‘æ•´ä½“è¿›åº¦ä¸ç« èŠ‚åˆ»åº¦ã€‚
  - **æ²‰æµ¸å¼æ ‡é¢˜**ï¼šå·¦ä¸Šè§’å®æ—¶æ˜¾ç¤ºå½“å‰ç« èŠ‚å…¨ç§°ï¼Œæ”¯æŒ **æ·¡å…¥æ·¡å‡º (Fade In/Out)** åŠ¨ç”»ä¸åŠé€æ˜èƒŒæ™¯æ¡†ï¼Œå¢å¼ºè§‚çœ‹ä½“éªŒã€‚
- **å…¨æ–¹ä½æ ·å¼å®šåˆ¶ (Full Customization)**ï¼š
  - **ä¸“ä¸šé…è‰²æ–¹æ¡ˆ**ï¼šå†…ç½® `tech_glow` (ç§‘æŠ€é’)ã€`cinema_gold` (ç”µå½±é‡‘)ã€`minimal_white` (æç®€ç™½) ç­‰ 10+ ç§é«˜å¯¹æ¯”åº¦é…è‰²æ–¹æ¡ˆã€‚
  - **çµæ´»å¸ƒå±€**ï¼šæ ‡é¢˜æ”¯æŒå››ä¸ªè§’è½ï¼ˆ`top_left`, `top_right`, `bottom_left`, `bottom_right`ï¼‰è‡ªç”±é…ç½®ï¼Œé¿å¼€è§†é¢‘å…³é”®ç”»é¢ã€‚
- **é«˜æ€§èƒ½æ¸²æŸ“æ¶æ„**ï¼š
  - **FFmpeg é›†æˆ**ï¼šåˆ©ç”¨ `filter_complex` å¤æ‚æ»¤é•œå›¾å®ç°å•æ¬¡æ¸²æŸ“ï¼Œé¿å…å¤šæ¬¡è½¬ç å¯¼è‡´çš„ç”»è´¨æŸè€—ã€‚
  - **ç¡¬ä»¶åŠ é€Ÿæ”¯æŒ**ï¼šå…¼å®¹ `VideoToolbox` (macOS) ä¸ `NVIDIA CUDA` åŠ é€Ÿï¼Œå¤§å¹…ç¼©çŸ­é•¿è§†é¢‘çš„å¤„ç†æ—¶é—´ã€‚

------

### ğŸ” SEO å…³é”®è¯ä¼˜åŒ– (Keywords)

ä¸ºäº†è®©æ‚¨çš„ GitHub ä»“åº“æˆ–é¡¹ç›®é¡µé¢æ›´å®¹æ˜“è¢«æœç´¢åˆ°ï¼Œå»ºè®®åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨ä»¥ä¸‹æ ‡ç­¾å’Œæè¿°ï¼š

- **æ ¸å¿ƒå…³é”®è¯**ï¼šè§†é¢‘è¿›åº¦æ¡åˆ¶ä½œã€FFmpeg åŠ¨æ€è¿›åº¦æ¡ã€Python è§†é¢‘å¤„ç†è„šæœ¬ã€è§†é¢‘ç« èŠ‚æ ‡è®°å·¥å…·ã€è‡ªåŠ¨æ·»åŠ è§†é¢‘æ—¶é—´è½´ã€‚
- **æŠ€æœ¯å…³é”®è¯**ï¼š`ffmpeg-python`ã€`video-automation`ã€`dynamic-progressbar`ã€`overlay-filter`ã€`video-metadata-extraction`ã€‚
- **åº”ç”¨åœºæ™¯**ï¼šæ•™ç¨‹ç±»è§†é¢‘åæœŸã€è‡ªåª’ä½“è§†é¢‘æ‰¹é‡åŠ å·¥ã€æ•™è‚²è¯¾ä»¶è§†é¢‘å¢å¼ºã€Vlog è¿›åº¦æ¡æ’ä»¶ã€‚

## å·¥å…·ç‰¹æ€§

- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- æ”¯æŒä½œä¸ºPythonåº“å¯¼å…¥ä½¿ç”¨
- æä¾›å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰
- æ¸…æ™°çš„æ¶æ„åˆ†å±‚

### å·²å®ç°åŠŸèƒ½

- **æ·»åŠ è¿›åº¦æ¡**ï¼šä¸ºè§†é¢‘æ·»åŠ åŠ¨æ€è¿›åº¦æ¡å’Œç« èŠ‚åˆ†å‰²çº¿
  - æ”¯æŒç®€å•æ¨¡å¼ï¼šåªæ·»åŠ æ—¶é—´ç‚¹åˆ†å‰²çº¿
  - æ”¯æŒé«˜çº§æ¨¡å¼ï¼šæ·»åŠ ç« èŠ‚æ ‡é¢˜ï¼ˆæ”¯æŒä¸­æ–‡æ˜¾ç¤ºï¼‰
  - æ”¯æŒè‡ªå®šä¹‰æ ·å¼ï¼šé¢œè‰²ã€å­—ä½“ã€å¤§å°ç­‰
  - **å®æ—¶è¿›åº¦åé¦ˆ**ï¼šæ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œé¢„è®¡å‰©ä½™æ—¶é—´
  - **æ€§èƒ½ä¼˜åŒ–**ï¼šé’ˆå¯¹å¤§æ–‡ä»¶ä¼˜åŒ–å†…å­˜å ç”¨å’Œå¤„ç†é€Ÿåº¦

## é¡¹ç›®ç»“æ„

```
Video-precessing/
â”œâ”€â”€ draft-code/              # éœ€æ±‚ä»£ç /ä¼ªä»£ç å­˜æ”¾ç›®å½•
â”œâ”€â”€ src/                     # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ video_processing/   # æ ¸å¿ƒè§†é¢‘å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ cli/                # å‘½ä»¤è¡Œæ¥å£
â”‚   â””â”€â”€ config/             # é…ç½®ç®¡ç†
â”œâ”€â”€ tests/                   # æµ‹è¯•ç›®å½•
â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ examples/                # ç¤ºä¾‹ä»£ç 
â””â”€â”€ scripts/                 # è¾…åŠ©è„šæœ¬
```

## å®‰è£…

### å‰ç½®è¦æ±‚

- Python 3.8+
- FFmpegï¼ˆéœ€è¦å®‰è£…å¹¶é…ç½®åœ¨ç³»ç»Ÿ PATH ä¸­ï¼‰

### å®‰è£…æ­¥éª¤

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–è€…ä»¥å¼€å‘æ¨¡å¼å®‰è£…
pip install -e .
```

### éªŒè¯ FFmpeg å®‰è£…

```bash
ffmpeg -version
ffprobe -version
```

## ä½¿ç”¨æ–¹å¼

### ä½œä¸ºåº“ä½¿ç”¨

```python
from pathlib import Path
from video_processing.processors.progress_bar import ProgressBarProcessor

# ä¸ºè§†é¢‘æ·»åŠ è¿›åº¦æ¡
processor = ProgressBarProcessor(
    input_path=Path("input.mp4"),
    chapters=[30, 75, 120],  # ç« èŠ‚æ—¶é—´ç‚¹ï¼ˆç§’ï¼‰
    bar_color="red",
    bar_height=15
)
output_path = processor.process()
print(f"å¤„ç†å®Œæˆ: {output_path}")
```

### ä½œä¸ºCLIå·¥å…·ä½¿ç”¨

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ Python æ¨¡å—è¿è¡Œï¼ˆæ¨èï¼‰**

```bash
# æŸ¥çœ‹å¸®åŠ©
python -m cli.main --help

# ç®€å•æ¨¡å¼ï¼šåªæ·»åŠ æ—¶é—´ç‚¹åˆ†å‰²çº¿
python -m cli.main add-progressbar input.mp4 -c 30 -c 75 -c 120

# é«˜çº§æ¨¡å¼ï¼šæ·»åŠ ç« èŠ‚æ ‡é¢˜ï¼ˆæ”¯æŒä¸­æ–‡ï¼Œä½¿ç”¨é»˜è®¤å­—ä½“ï¼‰
python -m cli.main add-progressbar input.mp4 \\
    -c 00:00 -t "æ•™ç¨‹ä»‹ç»" \\
    -c 00:30 -t "ç« èŠ‚ä¸€" \\
    -c 01:20 -t "ç« èŠ‚äºŒ"

# ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“
python -m cli.main add-progressbar input.mp4 \\
    -c 00:00 -t "æ•™ç¨‹ä»‹ç»" \\
    -c 00:30 -t "ç« èŠ‚ä¸€" \\
    --font-path /System/Library/Fonts/PingFang.ttc

# è‡ªå®šä¹‰æ ·å¼
python -m cli.main add-progressbar input.mp4 \\
    -c 00:00 -t "å¼€å§‹" -c 01:00 -t "ç»“æŸ" \\
    --font-path /System/Library/Fonts/PingFang.ttc \\
    --bar-color "#FF0000@0.5" --bg-color "#000000@0.6" \\
    --bar-height 100 --font-size 30

# æ€§èƒ½ä¼˜åŒ–é€‰é¡¹ï¼ˆå¤§æ–‡ä»¶å¤„ç†ï¼‰
python -m cli.main add-progressbar input.mp4 \\
    -c 00:00 -t "å¼€å§‹" -c 01:00 -t "ç»“æŸ" \\
    --preset fast --threads 4 --enable-hwaccel
```

**æ–¹å¼äºŒï¼šä½¿ç”¨ä¾¿æ·è„šæœ¬**

```bash
# ä½¿ç”¨é¡¹ç›®ä¸­çš„è„šæœ¬
./scripts/video-process --help

# ç®€å•æ¨¡å¼
./scripts/video-process add-progressbar input.mp4 -c 30 -c 75 -c 120

# é«˜çº§æ¨¡å¼ï¼ˆå¸¦æ ‡é¢˜ï¼‰
./scripts/video-process add-progressbar input.mp4 \\
    -c 00:00 -t "æ•™ç¨‹ä»‹ç»" \\
    -c 00:30 -t "ç« èŠ‚ä¸€" \\
    --font-path /Library/Fonts/Arial.ttf
```

**æ–¹å¼ä¸‰ï¼šå®‰è£…åä½¿ç”¨ï¼ˆå¦‚æœ entry_points æ­£å¸¸å·¥ä½œï¼‰**

```bash
# å®‰è£…åå¯ä»¥ç›´æ¥ä½¿ç”¨
video-process --help
video-process add-progressbar input.mp4 -c 30 -c 75 -c 120
```


## åº”ç”¨æ¡ˆä¾‹
```
<!-- ä¾‹1 -->
python -m cli.main add-progressbar ~/Downloads/4Video-processing/input.mp4 \
    -c 00:00 -t "Supergirl" \
    -c 01:57 -t "æ€ªå¥‡ç‰©è¯­-ç¬¬äº”å­£"\
    -c 04:00 -t "Mortal Kombat 2" \
    -c 06:25 -t "Ready Or Not Here I Come" \
    -c 08:45 -t "Hijack Season2" \
--title-position top_right --title-bg-color 'gray@1.0'

<!-- ä¾‹2 -->
 python -m cli.main add-progressbar ~/Downloads/4Video-processing/NEW_MOVIE_TRAILERS_2026.mp4 \
    -c 00:00 -t "Supergirl" \
    -c 01:57 -t "æ€ªå¥‡ç‰©è¯­-ç¬¬äº”å­£"\
    -c 04:00 -t "Mortal Kombat 2" \
    -c 06:25 -t "Ready Or Not Here I Come" \
    -c 08:45 -t "Hijack Season2" \
    -c 10:41 -t "Shelter" \
    -c 13:12 -t "Protector" \
    -c 15:00 -t "Solo Mio" \
    -c 17:18 -t "Atropia" \
    -c 19:02 -t "Street Fighter" \
    -c 19:57 -t "Mother of Files"\
    -c 21:58 -t "We Burry The Dead" \
    --color-scheme tech_dark
```



## å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

### æ•ˆæœå›¾
![æ•ˆæœå›¾](./docs/assets/effect-proccess-bar.png)

### ä»£ç è§„èŒƒ

é¡¹ç›®éµå¾ªPEP 8ä»£ç è§„èŒƒã€‚

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestã€‚

